<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>الشكاوى المرفوعة</title>
  <style>
    body { font-family:'Cairo',sans-serif;
      background:linear-gradient(135deg,#56ccf2,#2f80ed,#38ef7d);
      min-height:100vh;margin:0;padding:30px;
      display:flex;justify-content:center; }
    .container{background:#fff;padding:25px;border-radius:20px;
      width:100%;max-width:1200px;
      box-shadow:0 8px 25px rgba(0,0,0,0.15);}
    h1{text-align:center;margin-bottom:20px;color:#2c3e50;}
    table{width:100%;border-collapse:collapse;}
    th,td{padding:12px;text-align:center;border-bottom:1px solid #ddd;}
    th{background:linear-gradient(90deg,#56ccf2,#2f80ed,#38ef7d);color:#fff;}
    tr:hover{background:#f9f9f9;}
    .nav{text-align:center;margin-top:20px;}
    .nav a{text-decoration:none;color:#2f80ed;font-weight:bold;margin:0 10px;}
  </style>
</head>
<body>
  <div id="sidebar"></div>
    <script>
  const currentUser = JSON.parse(localStorage.getItem("currentUser"));
  if(!currentUser){ 
    alert("⚠️ يجب تسجيل الدخول أولاً");
    window.location.href="login.html";
  }
</script>
  <div class="container">
    <h1>📤 الشكاوى المرفوعة</h1>
    <table id="raisedTable">
      <thead>
        <tr>
          <th>رقم الشكوى</th><th>اسم العميل</th><th>رقم الهاتف</th>
          <th>وسيلة التواصل</th><th>الفرع</th><th>نوع الشكوى</th>
          <th>تفاصيل الشكوى</th><th>الحالة</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="nav">
      <a href="complaints.html">⬅ رجوع لسجل الشكاوى</a>
    </div>
  </div>
  <script>
    let raisedComplaints=JSON.parse(localStorage.getItem("raisedComplaints"))||[];
    const tbody=document.querySelector("#raisedTable tbody");
    function renderRaised(){
      tbody.innerHTML="";
      raisedComplaints.forEach(c=>{
        const row=document.createElement("tr");
        row.innerHTML=`
          <td>${c.id}</td><td>${c.name}</td><td>${c.phone}</td>
          <td>${c.method}</td><td>${c.branch}</td><td>${c.type}</td>
          <td>${c.details}</td><td>${c.status}</td>`;
        tbody.appendChild(row);
      });
    }
    renderRaised();
  </script>
  <script>
  fetch("sidebar.html")
    .then(res => res.text())
    .then(data => {
      document.getElementById("sidebar").innerHTML = data;
    });
</script>
</body>
</html>